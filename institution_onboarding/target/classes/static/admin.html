<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Governance - EduConnect</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Admin Inbox Layout */
        .admin-grid {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 25px;
            align-items: start;
            height: calc(100vh - 100px);
        }

        /* Left Panel: Pending List */
        .sidebar-panel {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid white;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
        }

        .list-container {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .request-card {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            border-left: 4px solid transparent;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: all 0.2s;
        }

        .request-card:hover {
            transform: translateX(3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .request-card.active {
            border-left-color: var(--primary);
            background: #eef2ff;
        }

        .meta-text {
            font-size: 0.8rem;
            color: #64748b;
            margin-top: 4px;
        }

        /* Right Panel: Details */
        .detail-panel {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            height: 100%;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            display: none; /* Hidden by default */
        }

        .detail-panel.visible { display: block; animation: fadeIn 0.3s; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
<div class="shape-blob shape-1"></div>
<div class="shape-blob shape-2"></div>
<div class="shape-blob shape-3"></div>

<nav id="navbar" class="navbar"></nav>

<div class="main-content" style="align-items: flex-start; padding-top: 1rem;">
    <div class="container wide" style="max-width: 1200px; padding: 0; background: transparent; box-shadow: none; border: none;">

        <div class="admin-grid">

            <div class="sidebar-panel">
                <div style="padding: 1.5rem; border-bottom: 1px solid rgba(0,0,0,0.05); background: rgba(255,255,255,0.8);">
                    <h3 style="margin:0; color: var(--primary);">üì• Pending Requests</h3>
                    <p style="font-size: 0.85rem; margin: 5px 0 0 0; color: #64748b;">Institutions awaiting approval</p>
                </div>

                <div id="pendingList" class="list-container">
                    <div style="text-align: center; padding: 20px; color: #94a3b8;">Loading...</div>
                </div>

                <button onclick="loadPendingRequests()" class="secondary" style="margin: 10px; font-size: 0.8rem;">‚Üª Refresh List</button>
            </div>

            <div id="detailView" class="detail-panel">
            </div>

            <div id="emptyState" class="detail-panel visible" style="display: flex; align-items: center; justify-content: center; text-align: center; color: #94a3b8;">
                <div>
                    <h2 style="color: #cbd5e1; font-size: 3rem; margin-bottom: 1rem;">üëà</h2>
                    <h3>Select a Request</h3>
                    <p>Click on an institution from the list<br>to view documents and verify.</p>
                </div>
            </div>

        </div>
    </div>
</div>

<template id="detailTemplate">
    <div style="display: flex; justify-content: space-between; align-items: start;">
        <div>
            <h2 id="viewName" style="color: var(--primary); margin-bottom: 5px;">Institution Name</h2>
            <div class="badge" style="background: #fef3c7; color: #92400e; padding: 4px 8px; border-radius: 4px; display: inline-block; font-size: 0.8rem; font-weight: 600;">PENDING APPROVAL</div>
        </div>
        <div style="text-align: right;">
            <p id="viewDate" style="font-size: 0.85rem; color: #64748b; margin:0;">Date: 2024-01-01</p>
            <p id="viewReg" style="font-size: 0.85rem; color: #64748b; margin:0;">Reg: INST-000</p>
        </div>
    </div>

    <hr>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 2rem;">
        <div>
            <h4 style="color: #475569; margin-bottom: 10px;">Contact Info</h4>
            <p id="viewEmail" style="margin-bottom: 5px;"><strong>Email:</strong> ...</p>
        </div>
        <div>
            <h4 style="color: #475569; margin-bottom: 10px;">Submitted Documents</h4>
            <ul id="viewDocList" class="file-list">
            </ul>
            <p id="viewNoDocs" class="hidden" style="color: red; font-size: 0.9rem;">‚ö†Ô∏è No documents uploaded.</p>
        </div>
    </div>

    <div style="background: #f8fafc; padding: 1.5rem; border-radius: 8px; border: 1px solid #e2e8f0;">
        <h3 style="margin-top: 0;">Final Decision</h3>
        <p style="font-size: 0.9rem; margin-bottom: 15px;">Review the documents above carefully before taking action.</p>

        <div class="btn-group">
            <button onclick="approveCurrent()" class="success">‚úÖ Approve Institution</button>
            <button onclick="showRejectBox()" class="danger">‚ùå Reject Institution</button>
        </div>

        <div id="rejectInputBox" class="hidden" style="margin-top: 15px; border-top: 1px solid #cbd5e1; padding-top: 15px;">
            <label style="font-weight: 600; font-size: 0.9rem; display: block; margin-bottom: 5px; color: #b91c1c;">Reason for Rejection (Mandatory):</label>
            <textarea id="rejectReasonText" placeholder="e.g., Documents are blurry, Incorrect Affiliation..." rows="3"></textarea>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button onclick="rejectCurrent()" class="danger">Confirm Rejection</button>
                <button onclick="hideRejectBox()" class="secondary">Cancel</button>
            </div>
        </div>
    </div>
</template>

<script src="script.js"></script>
</body>
</html>